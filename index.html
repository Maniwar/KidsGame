<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Hello Kitty Sanrio Rush - A fun 3D endless runner game for kids">
    <title>Hello Kitty Sanrio Rush ğŸ€</title>
    <link rel="stylesheet" href="/css/styles.css?v=8">
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>

        <!-- HUD Overlay -->
        <div id="hud">
            <div id="score-display">
                <div class="hud-item">
                    <span class="label">Score:</span>
                    <span id="score">0</span>
                </div>
                <div class="hud-item">
                    <span class="label">Coins:</span>
                    <span id="coins">0</span>
                </div>
                <div class="hud-item">
                    <span class="label">ğŸ¬</span>
                    <span id="candies">0</span>
                </div>
                <div class="hud-item">
                    <span class="label">Distance:</span>
                    <span id="distance">0m</span>
                </div>
                <div class="hud-item" id="fps-display">
                    <span class="label">FPS:</span>
                    <span id="fps">60</span>
                </div>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <h1>ğŸ€ Hello Kitty Sanrio Rush ğŸ€</h1>
            <div id="total-coins-display">
                <span class="coin-icon">ğŸª™</span>
                <span id="total-coins">0</span>
            </div>
            <p>Use Arrow Keys or WASD to move</p>
            <p>â†‘ Jump | â†“ Slide | â† â†’ Switch Lanes</p>
            <button id="start-button" class="game-button">Start Game</button>
            <div class="menu-buttons">
                <button id="shop-button" class="game-button shop-btn">ğŸ›ï¸ Shop</button>
                <button id="settings-button" class="game-button settings-btn">âš™ï¸ Settings</button>
                <button id="tips-button" class="game-button tips-btn">ğŸ’¡ Tips</button>
            </div>
        </div>

        <!-- Tips & Instructions Screen -->
        <div id="tips-screen" class="screen">
            <h2>ğŸ’¡ Tips & Instructions</h2>
            <div class="tips-content">
                <div class="tips-section">
                    <h3>ğŸ® Controls</h3>
                    <div class="tips-grid">
                        <div class="tip-item"><span class="tip-key">â¬† / W</span> Jump</div>
                        <div class="tip-item"><span class="tip-key">â¬† â¬†</span> Double Jump</div>
                        <div class="tip-item"><span class="tip-key">â¬‡ / S</span> Slide</div>
                        <div class="tip-item"><span class="tip-key">â¬… â¡ / A D</span> Switch Lanes</div>
                        <div class="tip-item"><span class="tip-key">Swipe</span> Touch Controls</div>
                    </div>
                </div>
                <div class="tips-section">
                    <h3>ğŸ¬ Candy & Sugar Rush</h3>
                    <ul class="tips-list">
                        <li>Collect candies to fill your <strong>Candy Meter</strong></li>
                        <li><strong>Sugar Rush Lv1:</strong> 3x score, coin magnet</li>
                        <li><strong>Super Sugar Rush Lv2:</strong> 5x score, bigger magnet, speed boost</li>
                        <li><strong>MEGA Sugar Rush Lv3:</strong> 10x score, invincible!</li>
                        <li>Keep collecting to stay powered up â€” the meter drains fast!</li>
                    </ul>
                </div>
                <div class="tips-section">
                    <h3>âš¡ Power-Ups</h3>
                    <ul class="tips-list">
                        <li>ğŸ›¡ï¸ <strong>Shield:</strong> Protects from one hit</li>
                        <li>ğŸ§² <strong>Magnet:</strong> Auto-collects nearby coins</li>
                        <li>âœ–ï¸2 <strong>Multiplier:</strong> Doubles coin value</li>
                        <li>ğŸ’¨ <strong>Super Speed:</strong> Fast & invincible burst</li>
                        <li>ğŸ„ <strong>Giant Mode:</strong> Grow big and smash through obstacles</li>
                        <li>ğŸˆ <strong>Flight:</strong> Float over obstacles on a balloon</li>
                        <li>Multiple power-ups can be <strong>active at the same time!</strong></li>
                        <li>Picking up the same power-up <strong>refreshes its timer</strong></li>
                    </ul>
                </div>
                <div class="tips-section">
                    <h3>ğŸš§ Obstacles</h3>
                    <ul class="tips-list">
                        <li><strong style="color:#00CC00">Green stripe</strong> on the ground = Jump over it!</li>
                        <li><strong style="color:#FF8800">Orange stripe</strong> on the ground = Slide under it!</li>
                    </ul>
                </div>
                <div class="tips-section">
                    <h3>â­ Pro Tips</h3>
                    <ul class="tips-list">
                        <li>Double jump to clear tall obstacles, or slide under them</li>
                        <li>Coins are worth more the further you run</li>
                        <li>Reach milestone flags for bonus coins and celebrations</li>
                        <li>Visit the <strong>Shop</strong> to unlock cute outfits</li>
                        <li>Save your <strong>Recovery Code</strong> in Settings to keep your progress!</li>
                        <li>Turn off Anti-Aliasing in Settings for better FPS on mobile</li>
                    </ul>
                </div>
            </div>
            <button id="tips-back-button" class="game-button">Back to Menu</button>
        </div>

        <!-- Shop Screen -->
        <div id="shop-screen" class="screen">
            <div class="shop-header">
                <h2>ğŸ›ï¸ Costume Shop</h2>
                <div class="shop-coins">
                    <span class="coin-icon">ğŸª™</span>
                    <span id="shop-total-coins">0</span>
                </div>
            </div>

            <div class="shop-content">
                <!-- Bows Section -->
                <div class="shop-section">
                    <h3>ğŸ€ Bows</h3>
                    <div id="shop-bows" class="shop-items"></div>
                </div>

                <!-- Shirts Section -->
                <div class="shop-section">
                    <h3>ğŸ‘• Shirts</h3>
                    <div id="shop-shirts" class="shop-items"></div>
                </div>

                <!-- Overalls Section -->
                <div class="shop-section">
                    <h3>ğŸ‘– Overalls</h3>
                    <div id="shop-overalls" class="shop-items"></div>
                </div>
            </div>

            <button id="shop-back-button" class="game-button">Back to Menu</button>
        </div>

        <!-- Settings Panel -->
        <div id="settings-panel" class="screen">
            <h2>âš™ï¸ Settings</h2>
            <div class="settings-options">
                <div class="setting-row">
                    <label for="aa-toggle">Anti-Aliasing (smoother edges)</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="aa-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <p class="setting-hint">Disable for better performance on mobile</p>

                <!-- Recovery Code Section -->
                <div class="recovery-section">
                    <h3>ğŸ”‘ Recovery Code</h3>
                    <p class="setting-hint">Write this down to restore your coins and items!</p>
                    <div class="recovery-code-display">
                        <span id="recovery-code">KITTY-XXXX-XXXX</span>
                        <button id="copy-code-btn" class="small-btn" title="Copy to clipboard">ğŸ“‹</button>
                    </div>

                    <h4>Restore Account</h4>
                    <p class="setting-hint">Enter a code to restore your progress</p>
                    <div class="restore-input-row">
                        <input type="text" id="restore-code-input" placeholder="KITTY-XXXX-XXXX" maxlength="15">
                        <button id="restore-btn" class="small-btn">Restore</button>
                    </div>
                    <p id="restore-status" class="restore-status"></p>
                </div>
            </div>
            <button id="settings-back-button" class="game-button">Back</button>
        </div>

        <!-- Game Over Screen -->
        <div id="game-over-screen" class="screen">
            <h2>Game Over!</h2>

            <!-- Total Coins Display -->
            <div id="gameover-coins-display" class="total-coins-badge">
                <span class="coin-icon">ğŸª™</span>
                <span id="gameover-total-coins">0</span>
            </div>

            <div class="score-summary">
                <p>Final Score: <span id="final-score">0</span></p>
                <p>Coins Collected: <span id="final-coins">0</span></p>
                <p>Candies Collected: <span id="final-candies">0</span></p>
                <p>Distance: <span id="final-distance">0m</span></p>
                <p>ğŸ Milestones: <span id="final-milestones">0</span> <span class="milestone-best">(Best: <span id="best-milestones">0</span>)</span></p>
            </div>

            <!-- Action Buttons -->
            <div class="gameover-buttons">
                <button type="button" id="restart-button" class="game-button">Play Again</button>
                <button type="button" id="gameover-shop-button" class="game-button shop-btn">ğŸ›ï¸ Shop</button>
            </div>

            <!-- New High Score Input -->
            <div id="new-high-score">
                <h3>ğŸ‰ NEW HIGH SCORE! ğŸ‰</h3>
                <input type="text" id="initials-input" maxlength="3" placeholder="AAA">
                <button type="button" id="save-score-button" class="game-button">Save Score</button>
            </div>

            <!-- Leaderboards Container -->
            <div class="leaderboards-container">
                <!-- Local/Personal Scores -->
                <div class="leaderboard local-leaderboard">
                    <h3>â­ Your Best Scores â­</h3>
                    <div id="local-leaderboard-list"></div>
                </div>

                <!-- Global Scores -->
                <div class="leaderboard global-leaderboard">
                    <h3>ğŸ† Global Top Scores ğŸ†</h3>
                    <div id="leaderboard-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/js/main.js"></script>
</body>
</html>
